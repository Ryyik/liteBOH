import{r as e,w as s,e as a,d as l,b as t,c as d,f as i,B as o,g as c,t as n,F as r,k as v,h as u,i as m,T as p,C as g,o as y,n as f,m as k}from"./vue-vendor-DXCnN0d2.js";import{_ as h}from"./ui-components-g-7AJD2c.js";const b={class:"messages-container"},_={class:"messages-header"},C={class:"header-left"},w={key:0,class:"unread-count"},S={class:"messages-list"},I={key:0},j=["onClick"],E={class:"message-status"},J={key:0,class:"red-dot"},N={class:"message-info"},O={class:"message-top"},x={class:"message-title"},B={class:"message-date"},F={class:"message-preview"},M={key:1,class:"no-messages"},T={class:"detail-header"},q={class:"detail-title-row"},z={class:"detail-type"},A={class:"detail-title"},D={class:"detail-date"},G={class:"detail-body-wrapper"},H={class:"detail-content"},K={class:"detail-footer"},L={class:"detail-source"},P="boh_read_messages",Q=h({__name:"Messages",setup(h){const Q=e([{id:1,type:"system",title:"系统通知",content:"方块之家全新的网页设计中！我们正在为您打造更加流畅、美观的交互体验。感谢您的支持与关注，更多新功能即将上线，敬请期待。此外，我们还将优化移动端的显示效果，确保您在任何设备上都能获得一致的优质体验。",source:"方块之家",date:"2026-01-09",read:!1},{id:2,type:"normal",title:"欢迎来到个人中心",content:"您可以在这里管理您的个人信息、查看订阅状态以及处理收货地址。如果您有任何建议或反馈，欢迎通过消息中心告知我们。",source:"系统",date:"2026-01-08",read:!1}]),R=e(null);s(R,e=>{document.body.style.overflow=e?"hidden":""}),a(()=>{document.body.style.overflow=""}),l(()=>{const e=JSON.parse(localStorage.getItem(P)||"[]");Q.value.forEach(s=>{e.includes(s.id)&&(s.read=!0)})});const U=()=>{const e=Q.value.filter(e=>e.read).map(e=>e.id);localStorage.setItem(P,JSON.stringify(e))},V=t(()=>Q.value.filter(e=>!e.read).length),W=()=>{Q.value.forEach(e=>e.read=!0),U()},X=()=>{R.value=null};return(e,s)=>(y(),d("div",b,[i("div",_,[i("div",C,[s[1]||(s[1]=i("h2",{class:"page-title"},"消息中心",-1)),V.value>0?(y(),d("span",w,n(V.value)+" 条未读",1)):c("",!0)]),V.value>0?(y(),d("button",{key:0,class:"mark-read-btn",onClick:W}," 全部已读 ")):c("",!0)]),i("div",S,[Q.value.length>0?(y(),d("div",I,[(y(!0),d(r,null,v(Q.value,e=>(y(),d("div",{key:e.id,class:f(["message-item",{unread:!e.read}]),onClick:s=>(e=>{R.value=e,e.read=!0,U()})(e)},[i("div",E,[e.read?c("",!0):(y(),d("span",J))]),i("div",N,[i("div",O,[i("span",x,n(e.title),1),i("span",B,n(e.date),1)]),i("div",F,n(e.content),1)])],10,j))),128))])):(y(),d("div",M,[...s[2]||(s[2]=[i("p",null,"暂无消息记录",-1)])]))]),(y(),o(g,{to:"body"},[u(p,{name:"fade"},{default:m(()=>[R.value?(y(),d("div",{key:0,class:"detail-overlay",onClick:X},[i("div",{class:"detail-modal",onClick:s[0]||(s[0]=k(()=>{},["stop"]))},[i("div",T,[i("div",q,[i("span",z,n("system"===R.value.type?"系统通知":"消息"),1),i("h3",A,n(R.value.title),1)]),i("span",D,n(R.value.date),1)]),i("div",G,[i("div",H,n(R.value.content),1)]),i("div",K,[i("div",L,"来源："+n(R.value.source),1),i("button",{class:"close-btn",onClick:X},"关闭")])])])):c("",!0)]),_:1})]))]))}},[["__scopeId","data-v-918adf91"]]);export{Q as default};
