import{r as e,d as s,b as a,c as l,f as t,h as d,g as i,t as c,F as n,k as o,i as r,T as v,o as u,n as m,m as p}from"./vue-vendor-4rUpFloF.js";import{_ as g}from"./ui-components-YpADZkt5.js";const f={class:"messages-container"},y={class:"messages-header"},k={class:"header-left"},h={key:0,class:"unread-count"},b={class:"messages-list"},_={key:0},C=["onClick"],S={class:"message-status"},w={key:0,class:"red-dot"},I={class:"message-info"},j={class:"message-top"},E={class:"message-title"},J={class:"message-date"},N={class:"message-preview"},O={key:1,class:"no-messages"},x={class:"detail-header"},F={class:"detail-title-row"},M={class:"detail-type"},T={class:"detail-title"},q={class:"detail-date"},z={class:"detail-body-wrapper"},A={class:"detail-content"},B={class:"detail-footer"},D={class:"detail-source"},G="boh_read_messages",H=g({__name:"Messages",setup(g){const H=e([{id:1,type:"system",title:"系统通知",content:"方块之家全新的网页设计中！我们正在为您打造更加流畅、美观的交互体验。感谢您的支持与关注，更多新功能即将上线，敬请期待。此外，我们还将优化移动端的显示效果，确保您在任何设备上都能获得一致的优质体验。",source:"方块之家",date:"2026-01-09",read:!1},{id:2,type:"normal",title:"欢迎来到个人中心",content:"您可以在这里管理您的个人信息、查看订阅状态以及处理收货地址。如果您有任何建议或反馈，欢迎通过消息中心告知我们。",source:"系统",date:"2026-01-08",read:!1}]),K=e(null);s(()=>{const e=JSON.parse(localStorage.getItem(G)||"[]");H.value.forEach(s=>{e.includes(s.id)&&(s.read=!0)})});const L=()=>{const e=H.value.filter(e=>e.read).map(e=>e.id);localStorage.setItem(G,JSON.stringify(e))},P=a(()=>H.value.filter(e=>!e.read).length),Q=()=>{H.value.forEach(e=>e.read=!0),L()},R=()=>{K.value=null};return(e,s)=>(u(),l("div",f,[t("div",y,[t("div",k,[s[1]||(s[1]=t("h2",{class:"page-title"},"消息中心",-1)),P.value>0?(u(),l("span",h,c(P.value)+" 条未读",1)):i("",!0)]),P.value>0?(u(),l("button",{key:0,class:"mark-read-btn",onClick:Q}," 全部已读 ")):i("",!0)]),t("div",b,[H.value.length>0?(u(),l("div",_,[(u(!0),l(n,null,o(H.value,e=>(u(),l("div",{key:e.id,class:m(["message-item",{unread:!e.read}]),onClick:s=>(e=>{K.value=e,e.read=!0,L()})(e)},[t("div",S,[e.read?i("",!0):(u(),l("span",w))]),t("div",I,[t("div",j,[t("span",E,c(e.title),1),t("span",J,c(e.date),1)]),t("div",N,c(e.content),1)])],10,C))),128))])):(u(),l("div",O,[...s[2]||(s[2]=[t("p",null,"暂无消息记录",-1)])]))]),d(v,{name:"fade"},{default:r(()=>[K.value?(u(),l("div",{key:0,class:"detail-overlay",onClick:R},[t("div",{class:"detail-modal",onClick:s[0]||(s[0]=p(()=>{},["stop"]))},[t("div",x,[t("div",F,[t("span",M,c("system"===K.value.type?"系统通知":"消息"),1),t("h3",T,c(K.value.title),1)]),t("span",q,c(K.value.date),1)]),t("div",z,[t("div",A,c(K.value.content),1)]),t("div",B,[t("div",D,"来源："+c(K.value.source),1),t("button",{class:"close-btn",onClick:R},"关闭")])])])):i("",!0)]),_:1})]))}},[["__scopeId","data-v-5f3b18f5"]]);export{H as default};
